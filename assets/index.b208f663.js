var A=Object.defineProperty,G=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var y=(o,e,t)=>e in o?A(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,_=(o,e)=>{for(var t in e||(e={}))v.call(e,t)&&y(o,t,e[t]);if(p)for(var t of p(e))L.call(e,t)&&y(o,t,e[t]);return o},b=(o,e)=>G(o,P(e));var I=(o,e)=>{var t={};for(var s in o)v.call(o,s)&&e.indexOf(s)<0&&(t[s]=o[s]);if(o!=null&&p)for(var s of p(o))e.indexOf(s)<0&&L.call(o,s)&&(t[s]=o[s]);return t};var h=(o,e,t)=>(y(o,typeof e!="symbol"?e+"":e,t),t);import{l as S,y as g,j as F,a as j,d as E,g as N,s as R,A as x,S as $}from"./vendor.585d9b78.js";const M=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}};M();const z=()=>({width:window.innerWidth,height:window.innerHeight}),O=(o=250)=>{const[e,t]=S(z());return g(()=>{let s=0;const r=()=>{s&&clearTimeout(s),s=window.setTimeout(()=>{s=0,t(z())},o)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e};class T{constructor(e,t){h(this,"_cols");h(this,"_rows");h(this,"_data");h(this,"_tempData");h(this,"playInterval",200);h(this,"_playId",0);this._cols=e,this._rows=t,this._data=new Uint8Array(e*t),this._tempData=new Uint8Array(e*t)}get cols(){return this._cols}get rows(){return this._rows}get length(){return this.cols*this.rows}setSize(e,t){return this._cols=e,this._rows=t,this._data=new Uint8Array(e*t),this._tempData=new Uint8Array(e*t),this}setCols(e){return this.setSize(e,this.rows)}setRows(e){return this.setSize(this.cols,e)}hasCell(e,t){return Number.isInteger(e)&&e>=0&&e<this.cols&&Number.isInteger(t)&&t>=0&&t<this.rows}setCell(e,t,s){return this.hasCell(e,t)&&(this._data[e+t*this.cols]=s),this}getCell(e,t){return this.hasCell(e,t)&&this._data[e+t*this.cols]?1:0}getEachCell(e){const{cols:t,rows:s,_data:r}=this;for(let n=0;n<s;n++)for(let i=0;i<t;i++)e(i,n,r[i+n*t]?1:0)}clear(){const{length:e,_data:t}=this;for(let s=0;s<e;s++)t[s]=0;return this}random(e=.2){const{length:t,_data:s}=this;for(let r=0;r<t;r++)s[r]=Math.random()<e?1:0;return this}next(){const{cols:e,length:t,_tempData:s,_data:r}=this;for(let n=0;n<t;n++){let i=0;n%e>0&&(r[n-e-1]&&++i,r[n-1]&&++i,r[n+e-1]&&++i),n%e<e-1&&(r[n-e+1]&&++i,r[n+1]&&++i,r[n+e+1]&&++i),r[n-e]&&++i,r[n+e]&&++i,s[n]=i===3||i===2&&r[n]?1:0}for(let n=0;n<t;n++)this._data[n]=s[n];return this}_playLoop(){this.next(),this._playId=self.setTimeout(()=>{this._playLoop()},this.playInterval)}get isPlaying(){return!!this._playId}play(){return this.isPlaying||this._playLoop(),this}pause(){return this.isPlaying&&(clearTimeout(this._playId),this._playId=0),this}togglePlay(){return this.isPlaying?this.pause():this.play()}}const l=F,w=j,V=(o,e,t,s)=>{const r=Math.ceil((o-s)/(t+s)),n=Math.ceil((e-s)/(t+s));return{cols:r,rows:n}},k=(o,e,t,s,r,n,i,a)=>{e.fillStyle=i,e.fillRect(0,0,t,s),e.fillStyle=a,o.getEachCell((c,d,u)=>{if(u){const m=n+c*(r+n),f=n+d*(r+n);e.fillRect(m,f,r,r)}})},D=()=>E(()=>{const o=new T(0,0),e=N(({width:t,height:s,cellSize:r=5,gutter:n=1,baseColor:i="black",cellColor:a="green"})=>{const c=R(null);return g(()=>{const{cols:d,rows:u}=V(t,s,r,n);o.setSize(d,u).random().play()},[t,s,r,n]),g(()=>{const d=c.current,u=d==null?void 0:d.getContext("2d");if(!u)return;let m=0;const f=()=>{m=requestAnimationFrame(()=>{k(o,u,t,s,r,n,i,a),f()})};return f(),()=>{m&&cancelAnimationFrame(m)}},[c,t,s,r,n,i,a]),l("canvas",{ref:c,width:t,height:s,style:`width: ${t}px; height: ${s}px`})});return{lifeGame:o,LifeGameView:e}},[]),U="_root_z9vt4_1";var q={root:U};const B=s=>{var r=s,{onChange:o,onClose:e}=r,t=I(r,["onChange","onClose"]);const n=x(i=>{if(i.target&&i.target instanceof HTMLInputElement){const{name:a,value:c}=i.target,d={};d[a]=a==="cellSize"||a==="gutter"?parseInt(c):c,o(d)}},[]);return l("div",{className:q.root,children:w("dl",{children:[l("dt",{children:"Cell size"}),l("dd",{children:l("input",{type:"number",min:"1",max:"100",step:"1",name:"cellSize",value:t.cellSize,onChange:n})}),l("dt",{children:"Gutter"}),l("dd",{children:l("input",{type:"number",min:"0",max:"100",step:"1",name:"gutter",value:t.gutter,onChange:n})}),l("dt",{children:"Base color"}),l("dd",{children:l("input",{type:"color",name:"baseColor",value:t.baseColor,onChange:n})}),l("dt",{children:"Cell color"}),l("dd",{children:l("input",{type:"color",name:"cellColor",value:t.cellColor,onChange:n})})]})})},H="_root_6tuci_1",K="_controller_6tuci_4",W="_styleForm_6tuci_12";var C={root:H,controller:K,styleForm:W};const J={cellSize:5,gutter:1,baseColor:"#000000",cellColor:"#008000"};function Q(){const{width:o,height:e}=O(),{lifeGame:t,LifeGameView:s}=D(),[r,n]=S(J),i=x(a=>{n(c=>Object.assign({},c,a))},[]);return w("div",{class:C.root,children:[l(s,_({width:o,height:e},r)),w("div",{class:C.controller,children:[l("button",{onClick:()=>t.togglePlay(),children:"Play/Pause"}),l("button",{onClick:()=>t.next(),children:"Next"}),l("button",{onClick:()=>t.random(),children:"Random"})]}),l("div",{class:C.styleForm,children:l(B,b(_({},r),{onChange:i}))})]})}$(l(Q,{}),document.getElementById("App"));
